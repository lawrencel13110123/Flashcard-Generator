var clozeCard = require('./cloze-card.js');
var questions = require('./cloze-question.json');
var inquirer = require('inquirer');
var questionsList = [];
var correct = 0;
var incorrect = 0; 
var number = 0; 

for (var i = 0; i < questions.length; i++) {
	var cards = new clozeCard(questions[i].text, questions[i].cloze)
	console.log(cards)
	questionsList.push(cards)
	console.log(questionsList)
}

function replay () {
	inquirer.prompt([
		{
			type: "list",
			name: "replay",
			message: "Do you want to try again?",
			choices: ["YES", "NO"]
		}
	]).then(function(response) {
		if (response.replay === "YES") {
			console.log("Let's Try Again")
			correct = 0
			incorrect = 0 
			number = 0
			inquiry()
		}
		else {
			console.log("See you next time!") 
			return
		}
	
	}); 
}

function inquiry () {

	if (number < questionsList.length) {

		inquirer.prompt([
			{
				type: "input",
				name: "question",
				message: questionsList[number].partial
			}
		]).then(function(answer) {
			if (answer.question.toLowerCase() === questionsList[number].cloze) {
				console.log("You're Right! The correct answer is " + questionsList[number].cloze.toUpperCase())
				correct ++ 
				number ++
				inquiry()
			}
			else {
				console.log("You're Wrong! The correct answer is " + questionsList[number].cloze.toUpperCase())
				incorrect ++ 
				number ++
				inquiry()
			}
		
		}); 
	}
	else {
		console.log("Incorrect: " + incorrect)
		console.log("Correct: " + correct)
		console.log("No More Questions")
		replay()
	}
}

inquiry() 